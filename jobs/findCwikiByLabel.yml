---
stub: "https://cwiki.apache.org/confluence/rest/api"
headers:
  Content-Type: "application/json"
auth:
  username:
  password:
tasks:
  - name: "search for content with label"
    uri: "content/search"
    data:
      cql: "space = INFRA"
    action:
      req: "get"
    output:
      write_to: "var"
      content: "content"
      name: "pages"
    urlencode: True
  - name: "Print pages"
    uri: "None"
    action:
      dump: "{% for page in pages.results %}{{ page.title }}{% endfor %}"
    output:
      write_to: "screen"

verbose: True
